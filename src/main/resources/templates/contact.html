<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head th:replace="base::baseHead('Upload')"></head>
<link rel="stylesheet" href="/css/bootstrap-tagsinput.css"/>
<link rel="stylesheet" href="/css/fortag.css"/>
<script src="/js/bootstrap-tagsinput.js"></script>
<body>

<header th:replace="base::baseNav"></header>

<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content" style="min-width:600px;">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="myModalLabel">请等待完成不要关闭页面</h4>
            </div>
            <div class="modal-body">
                <div id="box" class="container" style="min-width: 400px;width: 80%">

                    <img id="image" src="/img/loading.gif" style="min-width: 400px;width: 90%">

                </div>
            </div>
            <div class="modal-footer">
                <button id="close-head" type="button" class="btn btn-default" data-dismiss="modal" style="color: black">
                    Close
                </button>
                <button id="save-head" type="button" class="btn btn-primary">Save changes</button>
            </div>
        </div>
    </div>
</div>

<button type="button" style="display: none" data-toggle='modal' data-target='#myModal' id="show-modal"></button>

<div id="page-content" class="contact-page">
    <div class="container">
        <div class="row">
            <div id="main-content" class="col-md-9">
                <div class="box">
                    <center>
                        <div class="art-header">
                            <h1 class="center">Upload</h1>
                        </div>
                    </center>
                    <div class="art-content">
                        <div id="contact_form">
                            <form name="form1" id="ff" method="post" th:action="@{/user/upload}" enctype="multipart/form-data">
                                <label>
                                    <span>Enter your Title:</span>
                                    <input name="title" id="video-title" required="" type="text">
                                </label>
                                <label>
                                    <span>Enter your Type:</span>
                                    <input name="type" id="video-type" required="" type="text">
                                </label>
                                <label>
                                    <span>Enter your Tags:</span>
                                    <input name="tags" id="video-tags" required="" type="text">
                                </label>
                                <label>
                                    <span>Enter your introduction:</span>
                                    <textarea name="introduction" id="video-introduction" required=""></textarea>
                                </label>
                                <label>
                                    <span>Enter your Cover:</span>
                                    <input name="preview" id="video-cover" required="" type="file">
                                </label>
                                <label>
                                    <span>Enter your Video:</span>
                                    <input name="content" id="video-content" required="" type="file">
                                </label>
                                <center><input id="submit-button" class="sendButton" name="Submit" value="Submit" type="button"></center>
                            </form>
                        </div>
                        <!--<div class="progress">-->
                            <!--<div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width:0%">-->
                                <!--<span>0%</span>-->
                            <!--</div>-->
                        <!--</div>-->
                    </div>
                </div>
            </div>
            <div th:replace="base::sidebar"></div>
        </div>
    </div>
</div>

<footer th:replace="base::baseFooter"></footer>

<script>
//    function autTime() {
//        setInterval("myInterval()", 1000);//1000为1秒钟
//    }
//
//    function myInterval() {
//        $.post("/user/upload/status").done(function (res) {
//            alert(res);
//        });
//    }

    $(document).ready(function () {
        $("#video-tags").tagsinput();
        $("#submit-button").click(function () {
            $("#ff").submit();
            $("#show-modal").click();
//            autTime();
        });

    });
</script>
</body>
</html>